================================================================================
SPACECRAFT COMMAND REFERENCE
6U CubeSat Ground Command Display System
================================================================================

This document describes all available commands for nominal operations and
anomaly response. Commands can be typed in the Control GUI command window
or executed via buttons in the EID GUI.

================================================================================
ATTITUDE DETERMINATION AND CONTROL SYSTEM (ADCS) COMMANDS
================================================================================

ADCS_ON
    Description: Enable ADCS subsystem
    Parameters: None
    Example: ADCS_ON
    Result: ADCS enabled, mode set to DETUMBLE
    Note: ADCS must be enabled before using pointing modes

ADCS_OFF
    Description: Disable ADCS subsystem
    Parameters: None
    Example: ADCS_OFF
    Result: ADCS disabled, reaction wheels stopped

ADCS_NADIR
    Description: Point spacecraft nadir (Earth-facing)
    Parameters: None
    Example: ADCS_NADIR
    Result: Attitude mode set to nadir pointing, targets 0° roll/pitch/yaw
    Note: Cannot execute if ADCS is faulted

ADCS_SUN_POINT
    Description: Point spacecraft toward sun for maximum power generation
    Parameters: None
    Example: ADCS_SUN_POINT
    Result: Attitude mode set to sun pointing, increases solar array current
    Note: Cannot execute if ADCS is faulted

ADCS_INERTIAL
    Description: Hold current inertial attitude (no active pointing)
    Parameters: None
    Example: ADCS_INERTIAL
    Result: Spacecraft maintains current attitude, minimal reaction wheel usage
    Note: Cannot execute if ADCS is faulted

ADCS_DETUMBLE
    Description: Enable detumble mode to dampen rotation rates
    Parameters: None
    Example: ADCS_DETUMBLE
    Result: ADCS enabled in DETUMBLE mode, reduces angular rates
    Note: Cannot execute if ADCS is faulted

ADCS_GO_TO <roll> <pitch> <yaw>
    Description: Slew spacecraft to specified attitude and hold
    Parameters: 
        roll    - Roll angle in degrees (-180 to +180)
        pitch   - Pitch angle in degrees (-180 to +180)
        yaw     - Yaw angle in degrees (-180 to +180)
    Examples:
        ADCS_GO_TO 0 0 0        (point to default orientation)
        ADCS_GO_TO 45 0 0       (roll 45 degrees)
        ADCS_GO_TO 0 -15 90     (pitch down 15°, yaw 90°)
    Result: Spacecraft slews to target attitude and enters FINE_HOLD mode

ADCS_FINE_HOLD <roll> <pitch> <yaw>
    Description: Set target attitude and enter fine hold mode
    Parameters: 
        roll    - Roll angle in degrees (-180 to +180)
        pitch   - Pitch angle in degrees (-180 to +180)
        yaw     - Yaw angle in degrees (-180 to +180)
    Examples:
        ADCS_FINE_HOLD 45 30 -15
    Result: Target attitude set, enters FINE_HOLD mode for precise pointing

ADCS_RESET
    Description: Reset attitude and rates to zero
    Parameters: None
    Example: ADCS_RESET
    Result: Roll, pitch, yaw all set to 0°, rates zeroed

ADCS_POWER_CYCLE
    Description: Power cycle ADCS subsystem to clear fault
    Parameters: None
    Example: ADCS_POWER_CYCLE
    Result:
        - Clears ADCS fault flag
        - Disables ADCS
        - Sets mode to DETUMBLE
        - Resets reaction wheel speeds to 0 RPM
        - Clears momentum, saturation flags, desaturation states
    Use When: ADCS faulted, attitude control not responding

ADCS_DESAT
    Description: Manual desaturation command - triggers auto-desat sequence
    Parameters: None
    Example: ADCS_DESAT
    Prerequisites:
        - ADCS enabled
        - PROP system enabled
        - Catalyst ready (≥300°C)
        - Sufficient fuel (≥0.01 kg)
    Result:
        1. Slews to desaturation attitude based on momentum vector
        2. Fires thrusters to reduce wheel speeds to 1000 RPM
    Use When: Manual desaturation initiation needed

ADCS_RWS_DESAT
    Description: Legacy command - use ADCS_DESAT instead
    Parameters: None
    Example: ADCS_RWS_DESAT
    Note: Functionally equivalent to ADCS_DESAT


================================================================================
ELECTRICAL POWER SYSTEM (EPS) COMMANDS
================================================================================

EPS_MODE_SAFE
    Description: Set EPS to safe mode (minimal power consumption)
    Parameters: None
    Example: EPS_MODE_SAFE
    Result: EPS mode set to SAFE, operational mode set to SAFE

EPS_MODE_LOW_POWER
    Description: Set EPS to low power mode
    Parameters: None
    Example: EPS_MODE_LOW_POWER
    Power: ~5W consumption, non-essential systems off
    Result: EPS mode set to LOW_POWER, operational mode set to LOW_POWER

EPS_MODE_NOMINAL
    Description: Set EPS to nominal operations mode
    Parameters: None
    Example: EPS_MODE_NOMINAL
    Power: ~10W consumption, all systems active
    Result: EPS mode set to NOMINAL, operational mode set to NOMINAL

EPS_MODE_SCIENCE
    Description: Set EPS to science mode (high power)
    Parameters: None
    Example: EPS_MODE_SCIENCE
    Power: ~14W consumption, payload instruments active
    Result: EPS mode set to SCIENCE, operational mode set to SCIENCE

EPS_RESET
    Description: Reset power system to nominal state
    Parameters: None
    Example: EPS_RESET
    Result:
        - Battery A voltage restored to 11.8V (85% SOC)
        - Battery B voltage restored to 11.8V (85% SOC)
        - Power anomaly flag cleared
    Use When: Battery voltage anomaly, power system fault

EPS_POWER_CYCLE
    Description: Power cycle EPS subsystem to clear fault
    Parameters: None
    Example: EPS_POWER_CYCLE
    Result:
        - Clears EPS fault flag
        - Sets mode to NOMINAL
    Use When: EPS faulted, power management not responding

EPS_DEPLOY_ARRAY_A
    Description: Deploy solar array A
    Parameters: None
    Example: EPS_DEPLOY_ARRAY_A
    Result:
        - Solar array A deployed
        - Array A begins generating power from sunlight (0-15W depending on sun angle)
        - EVR log entry created
    Use When: Initial deployment after launch, or after array stowage
    Note: Arrays must be deployed to generate power

EPS_UNDEPLOY_ARRAY_A
    Description: Stow/undeploy solar array A
    Parameters: None
    Example: EPS_UNDEPLOY_ARRAY_A
    Result:
        - Solar array A stowed
        - Array A stops generating power
        - EVR log entry created
    Use When: Testing, thermal management, or contingency operations

EPS_DEPLOY_ARRAY_B
    Description: Deploy solar array B
    Parameters: None
    Example: EPS_DEPLOY_ARRAY_B
    Result:
        - Solar array B deployed
        - Array B begins generating power from sunlight (0-15W depending on sun angle)
        - EVR log entry created
    Use When: Initial deployment after launch, or after array stowage
    Note: Arrays must be deployed to generate power

EPS_UNDEPLOY_ARRAY_B
    Description: Stow/undeploy solar array B
    Parameters: None
    Example: EPS_UNDEPLOY_ARRAY_B
    Result:
        - Solar array B stowed
        - Array B stops generating power
        - EVR log entry created
    Use When: Testing, thermal management, or contingency operations

EPS_CROSS_CHARGE_ENABLE
    Description: Enable cross-charging between Solar Arrays and Batteries
    Parameters: None
    Example: EPS_CROSS_CHARGE_ENABLE
    Result:
        - Cross-charging enabled
        - Solar Array A can charge Battery A OR Battery B
        - Solar Array B can charge Battery A OR Battery B
        - Total solar power pooled and distributed evenly to both batteries
        - Provides redundancy if one array or battery fails
        - EVR log entry created
    Use When: Need redundant power paths, one array degraded, maximize reliability
    Note: Reduces single-point-of-failure risk

EPS_CROSS_CHARGE_DISABLE
    Description: Disable cross-charging between arrays and batteries
    Parameters: None
    Example: EPS_CROSS_CHARGE_DISABLE
    Result:
        - Cross-charging disabled
        - Solar Array A charges only Battery A
        - Solar Array B charges only Battery B
        - Independent power paths (no cross-coupling)
        - EVR log entry created
    Use When: Isolate faulty battery/array, normal operations, maximum efficiency
    Note: Default state - independent operation for fault isolation


================================================================================
COMMUNICATIONS SYSTEM (COMM) COMMANDS
===============================================================================

COMM_TX_RX
    Description: Set communications to full duplex mode (simultaneous TX/RX)
    Parameters: None
    Example: COMM_TX_RX
    Result:
        - COMM mode set to TX_RX (full duplex)
        - Can transmit and receive simultaneously
        - Highest power consumption mode (~35W)
        - No timeout - remains in full duplex until commanded otherwise
    Use When: Critical operations requiring continuous uplink/downlink
    Note: Exits safe mode if active, cannot execute if COMM faulted

COMM_TX [timeout_seconds]
    Description: Set communications to transmit mode
    Parameters: 
        timeout_seconds - Optional timeout to auto-return to RX (0 = no timeout)
    Examples:
        COMM_TX           (transmit indefinitely)
        COMM_TX 300       (transmit for 5 minutes then return to RX)
    Result:
        - COMM mode set to TX
        - Transmit power active at current setting (20/27/30 dBm)
        - RX disabled (cannot receive during TX) - NOT COMMANDABLE
    Use When: Need to transmit telemetry or command acknowledgments
    Note: High power consumption (~30W), cannot execute if COMM faulted

COMM_RX
    Description: Set communications to receive mode
    Parameters: None
    Example: COMM_RX
    Result:
        - COMM mode set to RX
        - Ready to receive uplink commands (COMMANDABLE)
        - Lower power consumption (~5W) than TX
    Use When: Normal operations, listening for ground commands
    Note: Default/nominal mode for COMM system, cannot execute if COMM faulted

COMM_STANDBY
    Description: Set communications to standby (low power, minimal activity)
    Parameters: None
    Example: COMM_STANDBY
    Result:
        - COMM mode set to STANDBY
        - Cannot TX or RX
        - Lowest power consumption (~1W)
    Use When: Power conservation, thermal management
    Note: Must return to RX/TX to resume communications, cannot execute if COMM faulted

COMM_POWER_30
    Description: Set transmit power to high (30 dBm / 1W)
    Parameters: None
    Example: COMM_POWER_30
    Result: TX power set to 30 dBm (maximum)
    Use When: Long distance, poor link margin

COMM_POWER_27
    Description: Set transmit power to medium (27 dBm / 500mW)
    Parameters: None
    Example: COMM_POWER_27
    Result: TX power set to 27 dBm (nominal)
    Use When: Normal operations, good link margin

COMM_POWER_20
    Description: Set transmit power to low (20 dBm / 100mW)
    Parameters: None
    Example: COMM_POWER_20
    Result: TX power set to 20 dBm (minimum)
    Use When: Close proximity ground station, power conservation

COMM_RESET
    Description: Reset communication system
    Parameters: None
    Example: COMM_RESET
    Result:
        - COMM mode set to RX
        - TX power reset to 30 dBm
        - Temperature reset to 30°C
        - Packet counters zeroed
        - Comm anomaly flag cleared
    Use When: Communication degradation, signal loss

COMM_POWER_CYCLE
    Description: Power cycle COMM subsystem to clear fault
    Parameters: None
    Example: COMM_POWER_CYCLE
    Result:
        - Clears COMM fault flag
        - Sets mode to RX (receive)
        - Resets temp to 30°C
        - Resets TX power to 30 dBm
        - Resets voltage and current
    Use When: COMM faulted, communications not responding


================================================================================
PROPULSION COMMANDS - Heated Catalyst Monopropellant System
================================================================================

The propulsion system uses a two-stage power architecture:
  1. STANDBY MODE (5V rail): Powers electronics only
  2. SYSTEM ON (VBat): Powers catalyst heater and valve actuators

The catalyst bed must be heated to 350°C for operation. Catalyst reaches ready
state at 300°C (typically 2-3 minutes warm-up time). Monopropellant (N2H4)
decomposes on contact with hot catalyst bed to produce thrust.

PROP_STANDBY
    Description: Enable propulsion standby mode (5V electronics power)
    Parameters: None
    Example: PROP_STANDBY
    Result:
        - 5V power enabled (~0.5W)
        - Electronics and sensors powered
        - Heater and valves remain unpowered
    Use When: Preparing for propulsion operations
    Note: Required before PROP_ON, cannot execute if PROP faulted

PROP_ON
    Description: Enable full propulsion system (VBat power)
    Parameters: None
    Example: PROP_ON
    Prerequisites: PROP_STANDBY must be active
    Result:
        - VBat power enabled
        - Heater and valve actuators powered
        - System ready for catalyst heating
    Use When: Need thrust capability
    Note: Does not automatically enable heater - use PROP_HEATER_ON
    Cannot execute if PROP faulted or standby not enabled

PROP_OFF
    Description: Disable propulsion system completely
    Parameters: None
    Example: PROP_OFF
    Result:
        - Disables VBat and 5V power
        - Closes valve
        - Turns off catalyst heater
        - Catalyst begins cooling

    Use When: End of propulsion operations, power conservation

PROP_HEATER_ON
    Description: Turn on catalyst bed heater
    Parameters: None
    Example: PROP_HEATER_ON
    Prerequisites: PROP_ON (system enabled)
    Result:
        - Catalyst heater ON (25W draw)
        - Begins heating to 350°C target
        - Takes 2-3 minutes to reach ready state (300°C)
    Use When: Preparing for thrust operations
    Note: Monitor catalyst_temp and catalyst_ready telemetry
    Cannot execute if PROP faulted or system not enabled

PROP_HEATER_OFF
    Description: Turn off catalyst bed heater
    Parameters: None
    Example: PROP_HEATER_OFF
    Result:
        - Catalyst heater OFF
        - Catalyst begins cooling
        - Catalyst goes NOT READY when temp < 300°C
    Use When: After maneuvers complete, power conservation

PROP_VALVE_OPEN
    Description: Open propellant valve to produce thrust
    Parameters: None
    Example: PROP_VALVE_OPEN
    Prerequisites:
        - PROP_ON (system enabled)
        - catalyst_ready = True (temp ≥ 300°C)
    Result:
        - Valve opens
        - Monopropellant flows to catalyst bed
        - Thrust produced (~1-5N typical)
        - Propellant consumed (~0.001 kg/sec)
    Use When: Performing maneuvers (desaturation, orbit adjust)
    Warning: Valve automatically closes if catalyst not ready
    Cannot execute if PROP faulted

PROP_VALVE_CLOSE
    Description: Close propellant valve to stop thrust
    Parameters: None
    Example: PROP_VALVE_CLOSE
    Result:
        - Valve closes
        - Thrust stops
        - Propellant consumption stops
    Use When: End of maneuver

PROP_POWER_CYCLE
    Description: Power cycle Propulsion subsystem to clear fault
    Parameters: None
    Example: PROP_POWER_CYCLE
    Result:
        - Clears PROP fault flag
        - Disables standby and system power (5V and VBat)
        - Closes propellant valve
        - Turns off catalyst heater
        - Resets all propulsion systems
    Use When: PROP faulted, propulsion not responding

Typical Propulsion Operation Sequence:
    1. PROP_STANDBY           (Enable 5V electronics)
    2. PROP_ON                (Enable VBat power)
    3. PROP_HEATER_ON         (Start catalyst heating)
    4. [Wait 2-3 min]         (Monitor catalyst_temp, wait for catalyst_ready)
    5. PROP_VALVE_OPEN        (Produce thrust)
    6. [Perform maneuver]
    7. PROP_VALVE_CLOSE       (Stop thrust)
    8. PROP_HEATER_OFF        (Optional: save power)
    9. PROP_OFF               (Shutdown when done)


================================================================================
THERMAL CONTROL SYSTEM (TCS) COMMANDS
================================================================================

TCS_DEPLOY_RADIATOR
    Description: Deploy thermal radiator
    Parameters: None
    Example: TCS_DEPLOY_RADIATOR
    Result:
        - Radiator deployed
        - Enhanced thermal radiation capability
        - EVR log entry created
    Use When: Initial deployment after launch, thermal management

TCS_UNDEPLOY_RADIATOR
    Description: Stow thermal radiator
    Parameters: None
    Example: TCS_UNDEPLOY_RADIATOR
    Result:
        - Radiator stowed
        - Reduced thermal radiation
        - EVR log entry created
    Use When: Testing or thermal configuration changes

TCS_HEATER_AVI_ON
    Description: Turn on avionics heater
    Parameters: None
    Example: TCS_HEATER_AVI_ON
    Result: Avionics heater enabled
    Use When: Avionics temperature too low

TCS_HEATER_AVI_OFF
    Description: Turn off avionics heater
    Parameters: None
    Example: TCS_HEATER_AVI_OFF
    Result: Avionics heater disabled
    Use When: Avionics temperature nominal or high

TCS_HEATER_EPS_ON
    Description: Turn on EPS heater
    Parameters: None
    Example: TCS_HEATER_EPS_ON
    Result: EPS heater enabled
    Use When: EPS temperature too low

TCS_HEATER_EPS_OFF
    Description: Turn off EPS heater
    Parameters: None
    Example: TCS_HEATER_EPS_OFF
    Result: EPS heater disabled
    Use When: EPS temperature nominal or high

TCS_HEATER_PROP_ON
    Description: Turn on propulsion heater
    Parameters: None
    Example: TCS_HEATER_PROP_ON
    Result: Propulsion heater enabled
    Use When: Propulsion system temperature too low

TCS_HEATER_PROP_OFF
    Description: Turn off propulsion heater
    Parameters: None
    Example: TCS_HEATER_PROP_OFF
    Result: Propulsion heater disabled
    Use When: Propulsion temperature nominal or high

TCS_POWER_CYCLE
    Description: Power cycle Thermal Control subsystem to clear fault
    Parameters: None
    Example: TCS_POWER_CYCLE
    Result:
        - Clears TCS fault flag
        - Turns off all heaters (AVI, EPS, PROP)
    Use When: TCS faulted, thermal control not responding


================================================================================
AVIONICS (AVI) COMMANDS
================================================================================

AVI_REBOOT
    Description: Reboot avionics computer
    Parameters: None
    Example: AVI_REBOOT
    Result:
        - Avionics CPU rebooted
        - CPU load reset to 30%
        - CPU temp reset to 40°C
        - Memory usage reset to 45%
        - EVR log entry created
    Use When: Software hang, high CPU load, memory issues

AVI_POWER_CYCLE
    Description: Power cycle Avionics subsystem to clear fault
    Parameters: None
    Example: AVI_POWER_CYCLE
    Result:
        - Clears AVI fault flag
        - Resets CPU load, temperature, memory usage
        - Resets voltage and current
    Use When: AVI faulted, avionics not responding


================================================================================
COMMAND & DATA HANDLING (CDH) COMMANDS
================================================================================

CDH_POWER_CYCLE
    Description: Power cycle Command & Data Handling subsystem to clear fault
    Parameters: None
    Example: CDH_POWER_CYCLE
    Result:
        - Clears CDH fault flag
        - Resets error count to 0
        - Resets command count
        - Resets voltage and current
    Use When: CDH faulted, data handling not responding


================================================================================
TT&C (TELEMETRY, TRACKING & COMMAND) COMMANDS
================================================================================

TTC_POWER_CYCLE
    Description: Power cycle TT&C subsystem to clear fault
    Parameters: None
    Example: TTC_POWER_CYCLE
    Result:
        - Clears TTC fault flag
        - Resets link status to 'NO_LINK'
        - Resets signal strength
        - Resets voltage and current
    Use When: TTC faulted, telemetry tracking not responding


================================================================================
NAVIGATION SYSTEM COMMANDS
===============================================================================

STAR_TRACKER_ON
    Description: Enable Star Tracker for precision attitude determination
    Parameters: None
    Example: STAR_TRACKER_ON
    Power: +2.5W
    Result:
        - Star Tracker powered on
        - Begins tracking stars in field of view
        - Provides high-accuracy attitude (0.5-15 arcsec depending on stability)
        - Requires stable attitude for good solution
    Use When: Need precision attitude determination (better than ADCS sensors)
    Note: Works best when ADCS is enabled and spacecraft is stable

STAR_TRACKER_OFF
    Description: Disable Star Tracker
    Parameters: None
    Example: STAR_TRACKER_OFF
    Result:
        - Star Tracker powered off (-2.5W)
        - Star tracking halted
        - Attitude solution no longer updated
    Use When: Power conservation, not needed for current operations

STAR_TRACKER_POWER_CYCLE
    Description: Power cycle Star Tracker to clear fault
    Parameters: None
    Example: STAR_TRACKER_POWER_CYCLE
    Result:
        - Clears Star Tracker fault flag
        - Disables Star Tracker
        - Resets star count to 0
        - Clears attitude solution (roll, pitch, yaw)
        - Resets voltage and current
    Use When: Star Tracker faulted, precision attitude unavailable

GPS_ON
    Description: Enable GPS receiver for position/velocity determination
    Parameters: None
    Example: GPS_ON
    Power: +3.0W
    Result:
        - GPS receiver powered on
        - Begins satellite acquisition (180 sec typical)
        - Provides position accuracy 15-50m in LEO
        - Provides velocity accuracy 0.1-0.5 m/s
    Use When: Need precise orbit determination beyond TLE propagation
    Note: LEO GPS requires 3-5 minutes for first fix

GPS_OFF
    Description: Disable GPS receiver
    Parameters: None
    Example: GPS_OFF
    Result:
        - GPS receiver powered off (-3.0W)
        - Satellite tracking halted
        - Position/velocity solution no longer updated
    Use When: Power conservation, orbit determination not critical

GPS_POWER_CYCLE
    Description: Power cycle GPS receiver to clear fault
    Parameters: None
    Example: GPS_POWER_CYCLE
    Result:
        - Clears GPS fault flag
        - Disables GPS
        - Resets satellite count to 0
        - Clears position/velocity solution
        - Resets voltage and current
    Use When: GPS faulted, navigation solution unavailable


================================================================================
SAFE MODE AND SYSTEM COMMANDS
================================================================================

SAFE_MODE
    Description: Enter safe mode - minimal power, sun pointing, all systems reset
    Parameters: None
    Example: SAFE_MODE
    Result: 
        - Operational mode set to SAFE
        - EPS mode set to SAFE
        - Attitude set to sun pointing (if ADCS not faulted)
        - ADCS kept in DETUMBLE mode for attitude stabilization
        - COMM cycles: 60s RX → 60s TX → 30s TX_RX (repeating)
        - Battery protected (min consumption)
        - All anomaly flags cleared
    Use When: Multiple failures, critical battery, unknown anomaly
    Note: If ADCS faulted, attitude control unavailable in safe mode

EXIT_SAFE_MODE
    Description: Exit safe mode and return to nominal operations
    Parameters: None
    Example: EXIT_SAFE_MODE
    Result:
        - Operational mode set to NOMINAL
        - EPS mode set to NOMINAL
        - COMM cycling stopped
        - EVR log entry created
    Use When: After resolving safe mode triggering conditions

SYS_RESET
    Description: System-wide reset (comprehensive reset of all subsystems)
    Parameters: None
    Example: SYS_RESET
    Result:
        - Resets all subsystem states
        - Clears all anomaly flags
        - EVR log entry created
    Use When: Major system malfunction requiring full reset


================================================================================
FAULT INJECTION COMMANDS (TESTING ONLY)
================================================================================

These commands control the fault injection system for training purposes.
When enabled, a random subsystem fault will be injected between 2-5 minutes
after mission start. Only one fault per test run.

FAULT_INJECTION_ENABLE
    Description: Enable fault injection for fault response training
    Parameters: None
    Example: FAULT_INJECTION_ENABLE
    Result:
        - Fault injection system armed
        - Random fault scheduled between T+2min and T+5min
        - Random subsystem will be faulted
        - EVR log shows scheduled time
    Use When: Beginning fault response training scenario
    Warning: Do NOT use during nominal operations training

FAULT_INJECTION_DISABLE
    Description: Disable fault injection system
    Parameters: None
    Example: FAULT_INJECTION_DISABLE
    Result:
        - Fault injection system disarmed
        - No fault will be injected (if not already injected)
        - EVR log confirms disablement
    Use When: Switching from fault response to nominal training
    Note: Cannot prevent fault if already scheduled/injected


================================================================================
LEGACY COMMANDS (For Backward Compatibility)
================================================================================

Note: These commands still work but use new subsystem-prefixed versions for clarity.

ATT_NADIR → Use ADCS_NADIR
ATT_SUN_POINT → Use ADCS_SUN_POINT
ATT_INERTIAL → Use ADCS_INERTIAL
ATT_SLEW → Use ADCS_GO_TO or ADCS_FINE_HOLD
ATT_RESET → Use ADCS_RESET

MODE_NOMINAL → Use EPS_MODE_NOMINAL
MODE_SCIENCE → Use EPS_MODE_SCIENCE
MODE_LOW_POWER → Use EPS_MODE_LOW_POWER

PWR_RESET → Use EPS_RESET

THR_BATT_MIN <voltage> → No direct replacement (threshold system removed)
THR_BATT_CAUT <voltage> → No direct replacement (threshold system removed)
THR_TEMP_MIN <temp> → No direct replacement (threshold system removed)
THR_TEMP_MAX <temp> → No direct replacement (threshold system removed)
THR_ATT_CAUT <degrees> → No direct replacement (threshold system removed)
THR_ATT_WARN <degrees> → No direct replacement (threshold system removed)

CLEAR_CAUTIONS → Still supported
CLEAR_CAUT → Alias for CLEAR_CAUTIONS
BATT_CHARGE → No longer supported
EMERG_SHUTDOWN → Use EPS_MODE_LOW_POWER
DIAG_MODE → No longer supported
THERM_RESET → Use TCS_POWER_CYCLE

CMD1 → Use ADCS_NADIR
CMD2 → Use ADCS_SUN_POINT
CMD3 → Use EPS_MODE_SCIENCE
CMD4 → Use EPS_MODE_LOW_POWER
CMD5 → Use CLEAR_CAUTIONS
CMD6 → No longer supported
CMD7 → No longer supported
CMD8 → No longer supported


================================================================================
COMMAND SYNTAX RULES
================================================================================

1. Commands are case-insensitive (ADCS_NADIR = adcs_nadir = Adcs_Nadir)

2. Parameters must be separated by spaces

3. Numeric parameters:
   - Angles: -180 to +180 (degrees)
   - Timeout: seconds (0 = no timeout)

4. Multiple word commands use underscores (ADCS_GO_TO, not ADCS GO TO)

5. Parameters in <brackets> are required

6. Parameters in [brackets] are optional


================================================================================
TYPICAL COMMAND SEQUENCES
================================================================================

SCENARIO: Battery Low During Eclipse
-------------------------------------
1. ADCS_SUN_POINT         (maximize solar exposure)
2. EPS_MODE_LOW_POWER     (reduce consumption)
3. Wait for sun exposure
4. EPS_MODE_NOMINAL       (return to normal ops)

SCENARIO: Attitude Deviation Detected
--------------------------------------
1. ADCS_RESET             (reset attitude to 0°)
2. ADCS_NADIR             (resume nadir pointing)
3. CLEAR_CAUTIONS         (clear caution flags)

SCENARIO: Temperature Exceeds Limits
-------------------------------------
1. EPS_MODE_LOW_POWER     (reduce heat generation)
2. ADCS_GO_TO 0 0 90      (different thermal orientation)
3. Wait for cooling
4. TCS_POWER_CYCLE        (reset thermal system if needed)
5. EPS_MODE_NOMINAL       (resume operations)

SCENARIO: Multiple System Failures
-----------------------------------
1. SAFE_MODE              (emergency recovery)
2. Wait for stabilization
3. Assess systems via EVR log
4. Gradually return to nominal:
   a. EXIT_SAFE_MODE
   b. EPS_MODE_NOMINAL
   c. ADCS_NADIR
   d. CLEAR_CAUTIONS

SCENARIO: Science Operation Pass
---------------------------------
1. ADCS_GO_TO 0 -15 0     (point at target)
2. EPS_MODE_SCIENCE       (activate payload)
3. Wait for data collection
4. EPS_MODE_NOMINAL       (return to standard)
5. ADCS_NADIR             (return to Earth-facing)

SCENARIO: Reaction Wheel Desaturation
--------------------------------------
1. PROP_STANDBY           (Enable propulsion electronics)
2. PROP_ON                (Enable VBat power)
3. PROP_HEATER_ON         (Start catalyst heating)
4. [Wait 2-3 min]         (Monitor catalyst_temp until ready)
5. ADCS_DESAT             (Automatic desaturation sequence)
6. [Wait for completion]  (Monitor wheel speeds)
7. PROP_HEATER_OFF        (Turn off heater)
8. PROP_OFF               (Shutdown propulsion)


================================================================================
TELEMETRY MONITORING THRESHOLDS
================================================================================

Battery Voltage (12V System):
    Nominal:  12.0 - 12.6 V
    Caution:  11.2 - 12.0 V (yellow)
    Warning:  < 10.8 V (red)
    Critical: < 10.5 V (emergency shutdown recommended)

Avionics Temperature:
    Nominal:  15 - 45 °C
    Caution:  10 - 15 °C or 45 - 50 °C (yellow)
    Warning:  < 10 °C or > 50 °C (red)
    Critical: < 5 °C or > 55 °C

EPS Temperature:
    Nominal:  10 - 40 °C
    Caution:  5 - 10 °C or 40 - 45 °C (yellow)
    Warning:  < 5 °C or > 45 °C (red)
    Critical: < 0 °C or > 50 °C

COMM Temperature:
    Nominal:  20 - 50 °C
    Caution:  15 - 20 °C or 50 - 55 °C (yellow)
    Warning:  < 15 °C or > 55 °C (red)
    Critical: < 10 °C or > 60 °C

Attitude Deviation:
    Nominal:  < 5° from target
    Caution:  5 - 10° (yellow)
    Warning:  > 10° (red)
    Critical: > 15° (control authority lost)

Reaction Wheel Speed:
    Nominal:  < 4500 RPM
    Caution:  4500 - 5500 RPM (yellow)
    Warning:  5500 - 6000 RPM (red)
    Saturated: ≥ 6000 RPM (desaturation required)

Propellant Mass:
    Nominal:  > 0.15 kg
    Caution:  0.10 - 0.15 kg (yellow)
    Warning:  < 0.10 kg (red)
    Critical: < 0.01 kg (insufficient for operations)

Catalyst Temperature (when PROP enabled):
    Not Ready:  < 300 °C
    Ready:      ≥ 300 °C
    Target:     350 °C


================================================================================
COMMAND LOGGING
================================================================================

All commands are logged in the EVR (Event Record) log with:
- Timestamp
- Command text
- Execution result
- System state changes

Example EVR entries:
    2025-11-21 14:23:15 - Executing command: ADCS_NADIR
    2025-11-21 14:23:45 - PROP: Catalyst bed ready for operation (T > 300°C)
    2025-11-21 14:24:12 - EPS reset - batteries restored to nominal


================================================================================
ERROR MESSAGES
================================================================================

Invalid Syntax:
    "ERROR: Invalid <command> syntax. Use: <proper syntax>"

Faulted Subsystem:
    "<COMMAND> rejected - <SUBSYSTEM> faulted (power cycle required)"

Prerequisites Not Met:
    "PROP_ON rejected - standby mode required first"
    "ADCS desaturation failed - PROP not enabled"
    "ADCS desaturation failed - catalyst not ready (need 300°C+)"

Command Not Recognized:
    "Command received: <text>" (acknowledged but no action taken)


================================================================================
NOTES
================================================================================

1. Commands execute immediately (no confirmation required)
2. For real missions, critical commands would require confirmation
3. All angles use aerospace convention: 
   - Roll: rotation about X (forward) axis
   - Pitch: rotation about Y (starboard) axis  
   - Yaw: rotation about Z (nadir) axis
4. FAULTED SUBSYSTEMS: When a subsystem shows 'faulted: True', it cannot be
   enabled or commanded until you send the appropriate POWER_CYCLE command.
   Example: If ADCS is faulted, commands like ADCS_NADIR will be rejected
   with "ADCS_NADIR rejected - ADCS faulted (power cycle required)"
5. SAFE MODE ADCS: When entering safe mode, ADCS will remain enabled in
   DETUMBLE mode for attitude stabilization, UNLESS the ADCS itself is
   faulted. This ensures the spacecraft maintains attitude control during
   emergencies whenever possible.
6. COMM MODES: TX mode disables receive capability - spacecraft NOT commandable
   during TX-only mode. Use COMM_RX or COMM_TX_RX to restore commandability.
7. PROPULSION SEQUENCE: Always follow proper startup sequence (STANDBY → ON →
   HEATER_ON → wait for catalyst ready). Valve will auto-close if catalyst
   temp drops below 300°C.
8. DESATURATION: Automatic desaturation triggers when any wheel exceeds 5500 RPM
   (if PROP enabled and catalyst ready). Manual desaturation via ADCS_DESAT.


================================================================================
OFF-NOMINAL COMPOUND ANOMALY RECOVERY PROCEDURES
================================================================================

During off-nominal scenarios, the spacecraft may experience compound anomalies
where 2 simultaneous faults occur between 3-5 minutes. These faults require
multi-step recovery procedures and may affect multiple subsystems.

--------------------------------------------------------------------------------
1. ADCS FAULT DURING MANEUVER (Tumbling Spacecraft)
--------------------------------------------------------------------------------

SYMPTOMS:
- ADCS faulted flag = True
- Spacecraft tumbling (5-10 deg/s rotation rates on all axes)
- All ADCS telemetry stale EXCEPT 'faulted' flag
- ADCS disabled automatically

RECOVERY PROCEDURE:
1. ADCS_POWER_CYCLE    (clears fault, resets tumble rates to zero)
2. ADCS_ON             (re-enables ADCS in DETUMBLE mode)
3. ADCS_DETUMBLE       (confirms detumble mode - should auto-stabilize)
4. (Wait for rates to stabilize near 0 deg/s)
5. ADCS_SUN_POINT      (restore power generation) or ADCS_NADIR (nominal ops)

NOTES:
- Power cycle clears tumble rates and fault flag
- Must follow full recovery sequence to restore attitude control
- Cannot skip DETUMBLE step - required for stabilization

--------------------------------------------------------------------------------
2. BATTERY DRAIN (Despite Working Solar Arrays)
--------------------------------------------------------------------------------

SYMPTOMS:
- Battery A or B voltage decreasing rapidly
- Battery A or B SOC dropping despite positive solar power
- Other battery charging normally
- Solar arrays generating power normally

RECOVERY PROCEDURE:
1. EPS_CROSS_CHARGE_ENABLE   (allows both arrays to charge both batteries)
2. Monitor both battery voltages and SOC
3. Healthy battery will support spacecraft while faulted battery isolates

NOTES:
- Cross-charging pools all solar power to charge healthy battery
- Faulted battery will continue draining until EPS power cycle
- EPS_POWER_CYCLE clears the drain anomaly if needed

--------------------------------------------------------------------------------
3. SOLAR ARRAY FAULT
--------------------------------------------------------------------------------

SYMPTOMS:
- Solar Array A or B status = FAULTED
- Zero current from faulted array (0.0 A)
- Zero power from faulted array (0.0 W)
- Other array generating power normally

RECOVERY PROCEDURE:
1. EPS_CROSS_CHARGE_ENABLE   (allows working array to charge both batteries)
2. Monitor bus voltage and battery SOC
3. May need to reduce power consumption if single array insufficient

OPTIONAL (if cross-charge insufficient):
4. EPS_MODE_LOW_POWER       (reduces spacecraft power consumption)
5. Disable non-essential subsystems to conserve power

NOTES:
- Cross-charging allows single array to support entire spacecraft
- Total power reduced to ~15W (one array max output)
- May require power conservation measures depending on load
- EPS_POWER_CYCLE will clear fault and restore array to NOMINAL status

--------------------------------------------------------------------------------
4. COMM FAULT (Complete Telemetry Loss)
--------------------------------------------------------------------------------

SYMPTOMS:
- COMM faulted flag = True
- All telemetry from ALL subsystems goes stale
- COMM forced to RX mode only
- Link status = NO_LINK

RECOVERY PROCEDURE:
1. COMM_POWER_CYCLE    (clears fault)
2. COMM_TX_RX          (restore transmit and receive capability)
3. (Telemetry should update immediately)

NOTES:
- This is the MOST CRITICAL fault - you lose all telemetry visibility
- You must send commands "blind" without telemetry feedback
- Power cycle is the ONLY recovery method
- After recovery, verify all subsystems are still operational

WARNING: During COMM fault, you are commanding without telemetry!
- Cannot see if commands succeed or fail
- Must use procedural memory and timing estimates
- Critical to send COMM_POWER_CYCLE as first recovery action

--------------------------------------------------------------------------------
5. PROP VALVE STUCK OPEN (Propellant Leak)
--------------------------------------------------------------------------------

SYMPTOMS:
- PROP faulted flag = True
- Valve status = OPEN (cannot be closed)
- Propellant mass decreasing continuously (~0.01 kg per cycle)
- Total deltaV increasing (uncontrolled thrust)
- All PROP telemetry stale EXCEPT 'faulted' flag

RECOVERY PROCEDURE:
1. PROP_POWER_CYCLE    (clears stuck valve fault, closes valve)
2. PROP_STBY           (enter standby mode)
3. PROP_ON             (re-enable propulsion)
4. PROP_HEATER_ON      (restart catalyst bed heating)
5. (Wait for catalyst ready: temp > 300°C)
6. PROP_VALVE_CLOSE    (confirm valve closed)

NOTES:
- Valve stuck open causes rapid propellant loss
- PROP_VALVE_CLOSE commands will be rejected until power cycle
- Power cycle is required to mechanically reset valve actuator
- Propellant lost during fault cannot be recovered
- Check remaining propellant mass after recovery

WARNING: Rapid propellant loss! Recovery must be prompt to preserve fuel.

--------------------------------------------------------------------------------
6. TCS HEATERS STUCK ON (Thermal Runaway)
--------------------------------------------------------------------------------

SYMPTOMS:
- TCS faulted flag = True
- All heaters forced ON (AVI, EPS, PROP)
- Temperatures rising continuously on all subsystems
- Heater OFF commands rejected
- Power consumption elevated (~15W total for all heaters)

RECOVERY PROCEDURE:
1. TCS_POWER_CYCLE     (clears stuck heater fault, turns off all heaters)
2. Monitor temperatures - should stabilize or decrease
3. Re-enable heaters individually if needed for thermal control:
   - TCS_HEATER_AVI_ON  (if avionics temp dropping too low)
   - TCS_HEATER_EPS_ON  (if battery temp dropping too low)
   - TCS_HEATER_PROP_ON (if propellant tank temp dropping too low)

NOTES:
- All heater OFF commands rejected until power cycle
- Power cycle turns off ALL heaters simultaneously
- Monitor temperatures closely - may trigger cautions/warnings
- Temperatures will rise to WARNING levels if not recovered promptly
- After recovery, may need to manually re-enable heaters for cold components

WARNING: If temperatures reach CRITICAL levels:
- AVI > 50°C: CPU damage risk
- EPS > 50°C: Battery damage risk
- Batteries < 0°C: Cannot charge (if over-cooled after recovery)

================================================================================
COMPOUND ANOMALY RESPONSE STRATEGY
================================================================================

When 2 compound anomalies occur simultaneously (off-nominal scenario):

1. ASSESS THE SITUATION
   - Check all subsystem fault flags
   - Identify which 2 anomalies are active
   - Note any telemetry that has gone stale

2. PRIORITIZE RECOVERY ACTIONS
   Priority 1: COMM fault (restores telemetry visibility)
   Priority 2: Thermal runaway (prevents hardware damage)
   Priority 3: ADCS tumbling (restores attitude control)
   Priority 4: Power issues (battery drain, solar fault)
   Priority 5: PROP leak (preserves remaining propellant)

3. EXECUTE RECOVERY PROCEDURES
   - Follow documented recovery procedure for each fault
   - Complete first recovery before starting second
   - Verify recovery success before proceeding

4. VERIFY NOMINAL OPERATIONS RESTORED
   - Check all fault flags cleared
   - Verify telemetry updating normally
   - Confirm spacecraft stable and controllable

EXAMPLE SCENARIO: COMM Fault + Battery Drain

Recommended sequence:
1. COMM_POWER_CYCLE         (restores telemetry - CRITICAL FIRST)
2. COMM_TX_RX               (verify telemetry updating)
3. EPS_CROSS_CHARGE_ENABLE  (address battery drain)
4. Monitor battery voltages and SOC to confirm recovery

EXAMPLE SCENARIO: ADCS Tumble + PROP Leak

Recommended sequence:
1. PROP_POWER_CYCLE         (stop propellant loss immediately)
2. PROP_STBY                (safe propulsion state)
3. ADCS_POWER_CYCLE         (clear tumble)
4. ADCS_ON                  (restore attitude control)
5. ADCS_DETUMBLE            (stabilize spacecraft)
6. ADCS_SUN_POINT           (restore power generation)

================================================================================
END OF COMMAND REFERENCE
================================================================================

